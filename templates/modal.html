<!-- The modal -->
<div id="modal-example" uk-modal>
    <div class="uk-modal-dialog uk-modal-body">
        <h2 class="uk-modal-title uk-text-bold">Student Marks</h2>
        <table class="uk-table uk-table-striped">
            <thead>
                <tr>
                    <th class="uk-text-bold">Student ID</th>
                    <th class="uk-text-bold">Subject</th>
                    <th class="uk-text-bold">Score</th>
                </tr>
            </thead>
            <tbody id="marks-table-body">
                <!-- Table data will be populated here -->
            </tbody>
        </table>
        <p class="uk-text-right">
            <button class="uk-button uk-button-default uk-modal-close uk-text-bold" type="button">Close</button>
        </p>
    </div>
</div>

<script>
    const studentId_ = localStorage.getItem('studentId')
    let subjects = [
        "English Language",
        "Mathematics",
        "Shona",
        "Ndebele",
        "Biology",
        "Chemistry",
        "Physics",
        "Geography",
        "History",
        "Integrated Science",
        "Agriculture",
        "Accounting",
        "Business Studies",
        "Economics",
        "Computer Science",
        "Literature in English",
        "Religious Studies",
        "Food and Nutrition",
        "Fashion and Fabrics",
        "Physical Education",
        "Art",
        "Music",
        "French",
        "Portuguese",
        "German",
        "Chinese",
        "Technical Graphics",
        "Wood Work",
        "Metal Work",
        "Building Studies"
    ]

    fetch('/api/marks/all')
        .then(response => response.json())
        .then(data => {
            const tableBody = document.getElementById('marks-table-body');

            tableBody.innerHTML = '';

            data.students.forEach(student => {
                if (student.student_id === parseInt(studentId_)) {
                    student.marks.forEach(mark => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${student.student_id}</td>
                            <td>${subjects[mark.subject_id]}</td>
                            <td>${mark.score}</td>
                        `;
                        tableBody.appendChild(row);
                    });
                }
            });
        })
        .catch(error => console.error('Error fetching marks data:', error));
</script>

</script>